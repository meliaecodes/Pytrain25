# Forge Pytrain Jira Trigger App

This project contains a Forge app written in Javascript that calls the Pytrain API which does a victory lap when an issue is transitioned into a particular Status in Jira.

See [developer.atlassian.com/platform/forge/](https://developer.atlassian.com/platform/forge) for documentation and tutorials explaining Forge.

## Requirements

See [Set up Forge](https://developer.atlassian.com/platform/forge/set-up-forge/) for instructions to get set up.

## Quick start

- Generate a new App ID and register the app to your atlassian developer account

```
forge register
```

- Build and deploy your app by running:
```
forge deploy
```

- Install your app in an Atlassian site by running:
```
forge install
```

- Develop your app by running `forge tunnel` to proxy invocations locally:
```
forge tunnel
```

- Replace the `doneid` and `url` in `src/index.jsx`.  Your url will be the one generated by ngrok, see project [README](../../README.md) for details. To find your `doneid`, ensure you have the forge tunnel open as above, and then move a Jira work item into the Done (or equivalent) status for the project you'd like to trigger the train from.  In the terminal you should see something similar to below. In this example the `doneid` is `5` 

```
INFO    12:18:55.667  9114704b-b00a-40de-8331-20fd912c16fb  Check for status ID here:
INFO    12:18:55.667  9114704b-b00a-40de-8331-20fd912c16fb  {
  field: 'status',
  fieldtype: 'jira',
  fieldId: 'status',
  from: '10009',
  fromString: 'Waiting for support',
  to: '5',
  toString: 'Resolved'
}
```

### Notes
- Use the `forge deploy` command when you want to persist code changes.
- Use the `forge install` command when you want to install the app on a new site.
- Once the app is installed on a site, the site picks up the new app changes you deploy without needing to rerun the install command.

## Support

See [Get help](https://developer.atlassian.com/platform/forge/get-help/) for how to get help and provide feedback.
